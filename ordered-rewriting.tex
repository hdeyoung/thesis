\chapter{Ordered rewriting}\label{ch:ordered-rewriting}

In this \lcnamecref{ch:ordered-rewriting}, we develop a rewriting interpretation of the ordered sequent calculus from the previous \lcnamecref{ch:ordered-logic}.

\section{Propositional ordered rewriting}

In this \lcnamecref{sec:ordered-rewriting:general}, we develop a rewriting interpretation of the ordered sequent calculus from the previous \lcnamecref{ch:ordered-logic}.
This development closely follows \citeauthor{Cervesato+Scedrov:IC09}'s work on intuitionistic linear logic as a multiset rewriting framework.

Just as their linear logical rewriting framework is more expressive than multiset rewriting, ordered rewriting framework presented in this chapter can be seen as an extension of tranditional notions of string rewriting.


\begin{equation*}
  \infer*{\oseq{\octx |- A}}{
    \oseq{\octx' |- A'}}
\end{equation*}


Many of the ordered sequent calculus's left rules consist of a single major premise with the same consequent as in the rule's conclusion [sequent], as well as a minor premise in the case of the $\lrule{\limp}$ and $\lrule{\pmir}$ rules.

Because so many rules share this scaffolding, it might be worthwhile to restructure the ordered sequent calculus to expose this shared scaffolding.
\begin{equation*}
  \infer{\oseq{\octx |- C}}{
    \octx \reduces \octx' & \oseq{\octx' |- C}}
\end{equation*}
For instance, if $\octx_L \oc (A \fuse B) \oc \octx_R \reduces \octx_L \oc A \oc B \oc \octx_R$ holds, then the usual $\lrule{\fuse}$ rule is a derivable instance of this generalized left rule.

\begin{inferences}
  \infer{\octx_1 \oc \octx_2 \reduces \octx'_1 \oc \octx_2}{
    \octx_1 \reduces \octx'_1}
  \and
  \infer{\octx_1 \oc \octx_2 \reduces \octx_1 \oc \octx'_2}{
    \octx_2 \reduces \octx'_2}
  \\
  \infer{\octx \oc (A \limp B) \reduces B}{
    \oseq{\octx |- A}}
  \and
  \infer{(B \pmir A) \oc \octx \reduces B}{
    \oseq{\octx |- A}}
  \\
  \infer{A \fuse B \reduces A \oc B}{}
  \and
  \infer{A \esuf B \reduces B \oc A}{}
  \and
  \infer{\one \reduces \octxe}{}
  \\
  \infer{A \with B \reduces A}{}
  \and
  \infer{A \with B \reduces B}{}
  \and
  \text{(no rule for $\top$)}
\end{inferences}


\begin{syntax*}
  Propositions &
    A & p \mid A \limp B \mid B \pmir A
          \mid A \fuse B \mid \one
          \mid A \with B \mid \top
  \\
  Ordered contexts & 
    \octx & \octxe \mid \octx_1 \oc \octx_2 \mid A
\end{syntax*}

\begin{itemize}
\item Lambek calculus and rewriting; compare to multiset rewriting; compare to string rewriting
\item Explain why $\plus$ and $\zero$ (and $\bot$) are undesirable here.
\item Connections to left rules
\end{itemize}

The rewriting relation is the smallest compatible relation that satisfies:
\begin{inferences}
  \infer{A \oc (A \limp B) \reduces B}{}
  \and
  \infer{(B \pmir A) \oc A \reduces B}{}
  \\
  \infer{A \with B \reduces A}{}
  \and
  \infer{A \with B \reduces B}{}
  \and
  \text{(no rule for $\top$)}
  \\
  \infer{A \fuse B \reduces A \oc B}{}
  \and
  \infer{\one \reduces \octxe}{}
\end{inferences}
We will also refer to this relation as \vocab{reduction}%
\footnote{Input transitions are postponed to \cref{ch:ordered-bisimilarity}.}%
.

$\Reduces$ is the reflexive-transitive closure of $\reduces$


\begin{equation*}
  \infer[\lrule{\with}_1]{\oseq{\octx'_L \oc (A \with B) \oc \octx'_R |- \gamma}}{
    \oseq{\octx'_L \oc A \oc \octx'_R |- \gamma}}
  \leftrightsquigarrow
  \infer{\octx'_L \oc (A \with B) \oc \octx'_R \reduces \octx'_L \oc A \oc \octx'_R}{
    \infer{A \with B \reduces A}{}}
\end{equation*}

\begin{equation*}
  \infer[\lrule{\limp}]{\oseq{\octx'_L \oc \octx \oc (A \limp B) \oc \octx'_R |- \gamma}}{
    \oseq{\octx |- A} & \oseq{\octx'_L \oc B \oc \octx'_R |- \gamma}}
  \rightsquigarrow
  \infer[\lrule{\limp}']{\oseq{\octx'_L \oc A \oc (A \limp B) \oc \octx'_R |- \gamma}}{
    \oseq{\octx'_L \oc B \oc \octx'_R |- \gamma}}
  \leftrightsquigarrow
  \infer{\octx'_L \oc A \oc (A \limp B) \oc \octx'_R \reduces \octx'_L \oc B \oc \octx'_R}{
    \infer{A \oc (A \limp B) \reduces B}{}}
\end{equation*}


\subsection{Definitions}

\begin{itemize}
\item not very interesting without recursion
\end{itemize}

\subsection{Examples}

\paragraph*{Automata and transducers}

\begin{equation*}
  \begin{lgathered}[t]
    q_0 \defd (a \limp q_0) \with (b \limp q_0 \with q_1) \\
    q_1 \defd (a \limp q_2) \with (b \limp q_2) \with (\emp \limp \one) \\
    q_2 \defd (a \limp q_2) \with (b \limp q_2)
  \end{lgathered}
  \qquad
  \begin{lgathered}[t]
    s_0 \defd (a \limp s_0) \with (b \limp s_1) \\
    s_1 \defd (a \limp s_0) \with (b \limp s_1) \with (\emp \limp \one)
  \end{lgathered}
\end{equation*}

\begin{equation*}
  \nfa{q} \defd \bigwith_{a \in \ialph} \bigl({\textstyle a \limp \bigwith_{q'_a} \nfa{q}'_a}\bigr)
\end{equation*}

\begin{theorem}
  Let $\aut{A} = (Q, \mathord{\nfareduces}, F)$ be \iac{NFA} over an input alphabet $\ialph$.
  Then:
  \begin{itemize}[nosep]
  \item $q \nfareduces[a] q'$ if and only if $\atm{a} \oc \nfa{q} \Reduces \nfa{q}'$.
  \item $q \in F$ if and only if $\atm{\emp} \oc \nfa{q} \Reduces \octxe$.
  \item $q \notin F$ if and only if $\atm{\emp} \oc \nfa{q} \longarrownot\reduces$.\alertnote{Careful -- depends on focusing!}
  \end{itemize}
  % \item
  %   If $\atm{a} \oc \nfa{q} \Reduces \nfa{q}'$, then $q \nfareduces[a] q'$.
  %   If $\atm{\emp} \oc \nfa{q} \Reduces \octxe$, then $q \in F$.
\end{theorem}


\paragraph*{Binary counter}

\begin{equation*}
  \begin{lgathered}
    e \defd (e \fuse b_1 \pmir i) \with (z \pmir d) \\
    b_0 \defd (b_1 \pmir i) \with (d \fuse b'_0 \pmir d) \\
    b_1 \defd (i \fuse b_0 \pmir i) \with (b_0 \fuse s \pmir d) \\
    b'_0 \defd (z \limp z) \with (s \limp b_1 \fuse s)
  \end{lgathered}
\end{equation*}

\begin{itemize}
\item Concurrency that is not message-passing
\item Alternative choreography -- how are these related?
\begin{equation*}
  \begin{lgathered}
    i \defd (e \limp e \fuse b_1) \with (b_0 \limp b_1) \with (b_1 \limp i \fuse b_0) \\
    d \defd (e \limp z) \with (b_0 \limp d \fuse b'_0) \with (b_1 \limp b_0 \fuse s) \\
    b'_0 \defd (z \limp z) \with (s \limp b_1 \fuse s)
  \end{lgathered}
\end{equation*}

\begin{equation*}
  \begin{lgathered}
    i \defd (e \limp e \fuse b_1) \with (b_0 \limp b_1) \with (b_1 \limp i \fuse b_0) \\
    d \defd (e \limp z) \with (b_0 \limp d \fuse b'_0) \with (b_1 \limp b_0 \fuse s) \\
    z \defd z \pmir b'_0 \\
    s \defd b_1 \fuse s \pmir b'_0
  \end{lgathered}
\end{equation*}
\end{itemize}


\section{}



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "thesis"
%%% End:
