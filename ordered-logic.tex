\chapter{Preliminaries: Intuitionistic ordered logic}\label{ch:ordered-logic}

% In \citeyear{Lambek:??}, \citeauthor{Lambek:??} published a seminal paper developing a formal system for describing sentence structure.
% The Lambek calculus, when viewed from a logical perspective, forms the core of \emph{intuitionistic ordered logic}%
% \footnote{Also known as intuitionistic noncommutative linear logic.}%
% .


This \lcnamecref{ch:ordered-logic} serves to review a sequent calculus presentation of [the propositional fragment of]
intuitionistic%
\footnote{Contrast with noncommutative logic}
ordered logic, also known as the (full) Lambek calculus\autocites{Lambek:AMM58}{Lambek:SLIM61}.
As a substructural logic, ordered logic eschews the usual structural properties of weakening, contraction, and exchange.
As in \citeauthor{Girard:TCS??}'s linear logic\autocite{Girard:TCS??}, the lack of weakening and contraction properties means that each antecedent must be used exactly once within a proof.
In ordered logic, the additional lack of an exchange property means that antecedents must also remain in order within a proof.

\Citeauthor{Lambek:AMM58} leveraged the noncommutativity of antecedents to give a formal description of sentence structure.
In this work, however, our interest is not mathematical linguistics but the logical foundations of concurrent computation, so the presentation of ordered logic has a more proof-theoretic slant and is derived from a presentation by ...


[Outline paragraph]


\section{The propositional, purely ordered fragment of intuitionistic ordered logic}

\begin{itemize}
\item Lambek calculus, given a judgmental reconstruction by Polakow and Pfenning
\item Propositional fragment only, omitting first-order universal and existential quantifiers
\end{itemize}

\subsection{Judgments, sequents, and contexts}

Following \citeauthor{Martin-Lof:NJPL96}\autocite{Martin-Lof:NJPL96}, we maintain a separation of ordered propositions, $A$, from judgments about those propositions.
  The categorical judgment $A \ord$ ... 

To allow hypothetical reasoning, a new form of categorical judgment, $A \ant$, for antecedents and generalize $A \ord$ to sequents
  \begin{equation*}
    \oseq{(A_1 \ant) \dotsm (A_i \ant) \dotsm (A_n \ant) |- A \ord}
    \,,
  \end{equation*}
  meaning the ordered sequence $A_1 \ant \dotsm A_n \ant$ can be transformed into $A \ord$.
  Because the judgment label can be inferred from a proposition's position in the sequent, we usually elide the labels and write $\oseq{A_1 \oc A_2 \dotsm A_n |- A}$.

% \paragraph{Ordered contexts}
To keep sequents from becoming verbose and cumbersome, antecedents are usually collected into an \vocab{ordered context}, $\octx = A_1 \oc A_2 \dotsm A_n$; sequents are then written $\oseq{\octx |- A}$.
% 
Being lists of antecedents, ordered contexts form a free monoid, with the monoid operation -- concatenation of contexts -- written as juxtaposition and the unit element -- the empty context -- written as $\octxe$.
In other words, ordered contexts are generated by the grammar
\begin{syntax*}
  & \octx & \octx_1 \oc \octx_2 \mid \octxe \mid A \ant
  \,,
\end{syntax*}
and are subject to the usual monoid laws,
\begin{marginfigure}
  % \vspace*{\dimexpr-\abovedisplayskip\relax}
  \begin{gather*}
    (\octx_1 \oc \octx_2) \oc \octx_3 = \octx_1 \oc (\octx_2 \oc \octx_3) \\
    (\octxe) \oc \octx = \octx = \octx \oc (\octxe)
  \end{gather*}
  \caption{Monoid laws for ordered contexts}
\end{marginfigure}%
which may be applied silently whenever necessary within proofs.
% These monoid laws are applied implicitly as needed within a proof.


\newthought{Even without} knowing any specifics about propositions, two purely judgmental principles are already apparent.
%
First, there should be a trivial transformation of $A$ into $A$, for all propositions $A$.
In the sequent calculus, this idea is rendered as an \vocab{identity principle}:
\begin{quotation}
  $\oseq{A \ant |- A \ord}$ for all propositions $A$.
\end{quotation}
Stated differently, $\vdash$ is reflexive.%
\footnote{Actually, this is not precisely true because the two sides of the turnstile use different judgments.
The intuition is nevertheless useful.}

Second, and dually, a proof of $A \ord$ should license the use of $A \ant$ in another proof.
\begin{quotation}
  If $\oseq{\octx |- A \ord}$ and $\oseq{\octx'_L \oc (A \ant) \oc \octx'_R |- C \ord}$, then $\oseq{\octx'_L \oc \octx \oc \octx'_R |- C \ord}$.
\end{quotation}



\subsection{Propositions}

The propositional, purely ordered fragment of intuitionistic ordered logic has propositions given by the following grammar.
\begin{syntax*}
  Propositions &
    A,B,C & \begin{array}[t]{@{}l@{}}
              \alpha \mid A \limp B \mid B \pmir A
                \mid A \fuse B \mid \one \\
              \mathllap{\mid {}} A \with B \mid \top
                \mid A \plus B \mid \zero
            \end{array}
\end{syntax*}
The ordered propositions in this fragment are:
propositional variables, $\alpha$;
left- and right-handed implications, $A \limp B$ and $B \pmir A$, respectively;
ordered conjunction, $A \fuse B$, and its unit, $\one$;
alternative conjunction, $A \with B$, and its unit, $\top$;
and
additive disjunction, $A \plus B$, and its unit, $\zero$.

In the tradition of \citeauthor{Gentzen:MZ35} and \citeauthor{Martin-Lof:NJPL96}\autocites{Gentzen:MZ35}{Martin-Lof:NJPL96}, the meaning of a proposition $A$ is given by what counts as a verification of the judgment $A \ord$.

Left-handed implication has the following right and left rules.
\begin{inferences}
  \infer[\rrule{\limp}]{\oseq{\octx |- A \limp B}}{
    \oseq{A \oc \octx |- B}}
  \and
  \infer[\lrule{\limp}]{\oseq{\octx'_L \oc \octx \oc (A \limp B) \oc \octx'_R |- C}}{
    \oseq{\octx |- A} & \oseq{\octx'_L \oc B \oc \octx'_R |- C}}
\end{inferences}
According to the right rule, $\rrule{\limp}$, verifying the left-handed implication $A \limp B$ amounts to verifying $B$ under the left-extended context $A \oc \octx$ -- that is, a hypothetical proof of $\oseq{A \oc \octx |- B}$.
The left rule, $\lrule{\limp}$, shows how to use such a proof:
Prove $A$ and left-adjoin that proof to the verification of $A \limp B$, which is just a hypothetical proof of $\oseq{A \oc \octx |- B}$.
This yields 

Right-handed implication is symmetric to its left-handed counterpart:
\begin{inferences}
  \infer[\rrule{\pmir}]{\oseq{\octx |- B \pmir A}}{
    \oseq{\octx \oc A |- B}}
  \and
  \infer[\lrule{\pmir}]{\oseq{\octx'_L \oc (B \pmir A) \oc \octx \oc \octx'_R |- C}}{
    \oseq{\octx |- A} & \oseq{\octx'_L \oc B \oc \octx'_R |- C}}
\end{inferences}

Ordered conjunction is another multiplicative connective; its right and left rules are:
\begin{inferences}
  \infer[\rrule{\fuse}]{\oseq{\octx_1 \oc \octx_2 |- A \fuse B}}{
    \oseq{\octx_1 |- A} & \oseq{\octx_2 |- B}}
  \and
  \infer[\lrule{\fuse}]{\oseq{\octx'_L \oc (A \fuse B) \oc \octx'_R |- C}}{
    \oseq{\octx'_L \oc A \oc B \oc \octx'_R |- C}}
\end{inferences}
As its right rule makes clear, ordered conjunction internalizes concatenation of contexts as a logical connective.

$\one$ internalizes the empty context.
The logical constant $\one$ is the nullary analogue to binary ordered conjunction, as its right and left rules reflect:
\begin{inferences}
  \infer[\rrule{\one}]{\oseq{\octxe |- \one}}{}
  \and
  \infer[\lrule{\one}]{\oseq{\octx'_L \oc \one \oc \octx'_R |- C}}{
    \oseq{\octx'_L \oc \octx'_R |- C}}
\end{inferences}
Consequently, $\one$ is the unit of ordered conjunction: $\oseq{\one \fuse A \dashv|- \oseq{A \dashv|- A \fuse \one}}$, for all propositions $A$.


\begin{equation*}
  \infer[\rrule{\limp}]{\oseq{A \limp (B \limp C) |- (A \esuf B) \limp C}}{
    \infer[\lrule{\esuf}]{\oseq{(A \esuf B) \oc (A \limp (B \limp C)) |- C}}{
      \infer[\lrule{\limp}]{\oseq{B \oc A \oc (A \limp (B \limp C)) |- C}}{
        \infer[\jrule{ID}]{\oseq{A |- A}}{} &
        \infer[\lrule{\limp}]{\oseq{B \oc (B \limp C) |- C}}{
          \infer[\jrule{ID}]{\oseq{B |- B}}{} &
          \infer[\jrule{ID}]{\oseq{C |- C}}{}}}}}
\end{equation*}

\begin{equation*}
  \infer[\rrule{\limp}]{\oseq{(A \esuf B) \limp C |- A \limp (B \limp C)}}{
    \infer[\rrule{\limp}]{\oseq{A \oc ((A \esuf B) \limp C) |- B \limp C}}{
      \infer[\lrule{\limp}]{\oseq{B \oc A \oc ((A \esuf B) \limp C) |- C}}{
        \infer[\rrule{\esuf}]{\oseq{B \oc A |- A \esuf B}}{
          \infer[\jrule{ID}]{\oseq{B |- B}}{} &
          \infer[\jrule{ID}]{\oseq{A |- A}}{}} &
        \infer[\jrule{ID}]{\oseq{C |- C}}{}}}}
\end{equation*}

\begin{equation*}
  \infer[\rrule{\pmir}]{\oseq{(C \pmir B) \pmir A |- C \pmir (B \esuf A)}}{
    \infer[\lrule{\esuf}]{\oseq{((C \pmir B) \pmir A) \oc (B \esuf A) |- C}}{
      \infer[\lrule{\pmir}]{\oseq{((C \pmir B) \pmir A) \oc A \oc B |- C}}{
        \infer[\jrule{ID}]{\oseq{A |- A}}{} &
        \infer[\lrule{\pmir}]{\oseq{(C \pmir B) \oc B |- C}}{
          \infer[\jrule{ID}]{\oseq{B |- B}}{} &
          \infer[\jrule{ID}]{\oseq{C |- C}}{}}}}}
\end{equation*}

\begin{equation*}
  \infer[\rrule{\pmir}]{\oseq{C \pmir (B \esuf A) |- (C \pmir B) \pmir A}}{
    \infer[\rrule{\pmir}]{\oseq{(C \pmir (B \esuf A)) \oc A |- C \pmir B}}{
      \infer[\lrule{\pmir}]{\oseq{(C \pmir (B \esuf A)) \oc A \oc B |- C}}{
        \infer[\rrule{\esuf}]{\oseq{A \oc B |- B \esuf A}}{
          \infer[\jrule{ID}]{\oseq{A |- A}}{} &
          \infer[\jrule{ID}]{\oseq{B |- B}}{}} &
        \infer[\jrule{ID}]{\oseq{C |- C}}{}}}}
\end{equation*}

\begin{itemize}
\item Contexts form a monoid
\item None of the usual structural properties -- weakening, contraction, exchange -- but we still have (implicitly, judgmentally) associativity
\item Multiplicative falsehood\alertnote{Get rid of this?}
\end{itemize}

\subsection{Rules of logical inference}

According to its right rule, verifying $A \limp B$ amounts to verifying $B$ under the additional assumption that $A$ holds;
moreover, the assumption $A$ is prepended to the left end of context $\octx$, because $A \limp B$ is a left-handed implication.

To use a verification of $A \limp B$, we first verify $A$ and are thus justified in using $B$.

Using a verification of $A \limp B$ thus amounts to using the hypothetical verification of $B$ under $A$


The right-handed implication $B \pmir A$ is symmetric to left-handed implication.


\begin{figure}
  \begin{inferences}
    \infer[\jrule{CUT}^A]{\oseq{\octx'_L \oc \octx \oc \octx'_R |- \cseq}}{
      \oseq{\octx |- A} & \oseq{\octx'_L \oc A \oc \octx'_R |- \cseq}}
    \and
    \infer[\jrule{ID}^A]{\oseq{A |- A}}{}
    \\
    \infer[\rrule{\limp}]{\oseq{\octx |- A \limp B}}{
      \oseq{A \oc \octx |- B}}
    \and
    \infer[\lrule{\limp}]{\oseq{\octx'_L \oc \octx \oc (A \limp B) \oc \octx'_R |- \cseq}}{
      \oseq{\octx |- A} & \oseq{\octx'_L \oc B \oc \octx'_R |- \cseq}}
    \\
    \infer[\rrule{\pmir}]{\oseq{\octx |- B \pmir A}}{
      \oseq{\octx \oc A |- B}}
    \and
    \infer[\lrule{\pmir}]{\oseq{\octx'_L \oc (B \pmir A) \oc \octx \oc \octx'_R |- \cseq}}{
      \oseq{\octx |- A} & \oseq{\octx'_L \oc B \oc \octx'_R |- \cseq}}
    \\
    \infer[\rrule{\fuse}]{\oseq{\octx_A \oc \octx_B |- A \fuse B}}{
      \oseq{\octx_A |- A} & \oseq{\octx_B |- B}}
    \and
    \infer[\lrule{\fuse}]{\oseq{\octx'_L \oc (A \fuse B) \oc \octx'_R |- \cseq}}{
      \oseq{\octx'_L \oc A \oc B \oc \octx'_R |- \cseq}}
    \\
    \infer[\rrule{\one}]{\oseq{\octxe |- \one}}{}
    \and
    \infer[\lrule{\one}]{\oseq{\octx'_L \oc \one \oc \octx'_R |- \cseq}}{
      \oseq{\octx'_L \oc \octx'_R |- \cseq}}
    \\
    \infer[\rrule{\with}]{\oseq{\octx |- A \with B}}{
      \oseq{\octx |- A} & \oseq{\octx |- B}}
    \and
    \infer[\lrule{\with}_1]{\oseq{\octx'_L \oc (A \with B) \oc \octx'_R |- \cseq}}{
      \oseq{\octx'_L \oc A \oc \octx'_R |- \cseq}}
    \and
    \infer[\lrule{\with}_2]{\oseq{\octx'_L \oc (A \with B) \oc \octx'_R |- \cseq}}{
      \oseq{\octx'_L \oc B \oc \octx'_R |- \cseq}}
    \\
    \infer[\rrule{\top}]{\oseq{\octx |- \top}}{}
    \and
    \text{(no $\lrule{\top}$ rule)}
    \\
    \infer[\rrule{\plus}_1]{\oseq{\octx |- A \plus B}}{
      \oseq{\octx |- A}}
    \and
    \infer[\rrule{\plus}_2]{\oseq{\octx |- A \plus B}}{
      \oseq{\octx |- B}}
    \and
    \infer[\lrule{\plus}]{\oseq{\octx'_L \oc (A \plus B) \oc \octx'_R |- \cseq}}{
      \oseq{\octx'_L \oc A \oc \octx'_R |- \cseq} &
      \oseq{\octx'_L \oc B \oc \octx'_R |- \cseq}}
    \\
    \text{(no $\rrule{\zero}$ rule)}
    \and
    \infer[\lrule{\zero}]{\oseq{\octx'_L \oc \zero \oc \octx'_R |- \cseq}}{}
    \\
    \infer[\rrule{\bot}]{\oseq{\octx |- \bot}}{
      \oseq{\octx |- \cseqe}}
    \and
    \infer[\lrule{\bot}]{\oseq{\bot |- \cseqe}}{}
  \end{inferences}
\end{figure}  

\begin{theorem}[Admissibility of cut]
  If $\oseq{\octx |- A}$ and $\oseq{\octx'_L \oc A \oc \octx'_R |- C}$, then $\oseq{\octx'_L \oc \octx \oc \octx'_R |- C}$.
\end{theorem}
\begin{proof}
  By lexicographic structural induction, first on the structure of the cut formula and then simultaneously on the structures of the given derivations.

  \begin{description}
  \item[Identity cases]
    \begin{equation*}
      \infer-[\jrule{CUT}^A]{\oseq{\octx'_L \oc A \oc \octx'_R |- C}}{
        \infer[\jrule{ID}^A]{\oseq{A |- A}}{} &
        \deduce{\oseq{\octx'_L \oc A \oc \octx'_R |- C}}{\EE}}
      =
      \deduce{\oseq{\octx'_L \oc A \oc \octx'_R |- C}}{\EE}
    \end{equation*}

  \item[Principal cases]
    \begin{equation*}
      \infer-[\jrule{CUT}^{A_1 \limp A_2}]{\oseq{\octx'_L \oc \octx'_{A_1} \oc \octx \oc \octx'_R |- C}}{
        \infer[\rrule{\limp}]{\oseq{\octx |- A_1 \limp A_2}}{
          \deduce{\oseq{A_1 \oc \octx |- A_2}}{\DD_1}} &
        \infer[\lrule{\limp}]{\oseq{\octx'_L \oc \octx'_{A_1} \oc (A_1 \limp A_2) \oc \octx'_R |- C}}{
          \deduce{\oseq{\octx'_{A_1} |- A_1}}{\EE_1} &
          \deduce{\oseq{\octx'_L \oc A_2 \oc \octx'_R |- C}}{\EE_2}}}
      =
      \infer-[\jrule{CUT}^{A_2}]{\oseq{\octx'_L \oc \octx'_{A_1} \oc \octx \oc \octx'_R |- C}}{
        \infer-[\jrule{CUT}^{A_1}]{\oseq{\octx'_{A_1} \oc \octx |- A_2}}{
          \deduce{\oseq{\octx'_{A_1} |- A_1}}{\EE_1} &
          \deduce{\oseq{A_1 \oc \octx |- A_2}}{\DD_1}} &
        \deduce{\oseq{\octx'_L \oc A_2 \oc \octx'_R |- C}}{\EE_2}}
    \end{equation*}

  \item[Commutative cases]
    \begin{equation*}
      \infer-[\jrule{CUT}^A]{\oseq{\octx'_L \oc \octx_L \oc (B_1 \with B_2) \oc \octx_R \oc \octx'_R |- C}}{
        \infer[\lrule{\with}_1]{\oseq{\octx_L \oc (B_1 \with B_2) \oc \octx_R |- A}}{
          \deduce{\oseq{\octx_L \oc B_1 \oc \octx_R |- A}}{\DD_1}} &
        \deduce{\oseq{\octx'_L \oc A \oc \octx'_R |- C}}{\EE}}
      =
      \infer[\lrule{\with}_1]{\oseq{\octx'_L \oc \octx_L \oc (B_1 \with B_2) \oc \octx_R \oc \octx'_R |- C}}{
        \infer-[\jrule{CUT}^A]{\oseq{\octx'_L \oc \octx_L \oc B_1 \oc \octx_R \oc \octx'_R |- C}}{
          \deduce{\oseq{\octx_L \oc B_1 \oc \octx_R |- A}}{\DD_1} &
          \deduce{\oseq{\octx'_L \oc A \oc \octx'_R |- C}}{\EE}}}
    \end{equation*}

    \begin{equation*}
      \infer-[\jrule{CUT}^A]{\oseq{\octx'_{L1} \oc \octx \oc \octx'_{L2} \oc (B_1 \with B_2) \oc \octx'_R |- C}}{
        \deduce{\oseq{\octx |- A}}{\DD} &
        \infer[\lrule{\with}_1]{\oseq{\octx'_{L1} \oc A \oc \octx'_{L2} \oc (B_1 \with B_2) \oc \octx'_R |- C}}{
          \deduce{\oseq{\octx'_{L1} \oc A \oc \octx'_{L2} \oc B_1 \oc \octx'_R |- C}}{\EE_1}}}
      =
    \end{equation*}
  \end{description}
\end{proof}

\begin{theorem}[Identity expansion]
  $\oseq{A |- A}$ for all propositions $A$.
\end{theorem}
\begin{proof}
  By induction on the structure of the proposition $A$.
\end{proof}

\subsection{Circular propositions and circular derivations}

\begin{itemize}
\item No exponentials; recursion/circularity instead (Milner)\alertnote{Should this go in ordered rewriting chapter instead?}
\item $\mu$MALL (Baelde) and circular proofs (Fortier and Santocanale)
\item Contractivity requirement
\item We will use only general recursion.
  Inductive and coinductive types are outside our scope.
\item Subset of infinite propositions/derivations
\end{itemize}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "thesis"
%%% End:
